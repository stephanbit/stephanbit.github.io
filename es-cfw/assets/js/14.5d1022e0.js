(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{156:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("Then at the very least, read about:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/expect.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jest's matchers"),s("OutboundLink")],1),t._v(" for examples of other assertions you can make")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/asynchronous.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Testing async code"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/setup-teardown.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Setup and teardown"),s("OutboundLink")],1)])]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),s("p",[t._v("Jest offers many tools for mocks, including:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/mock-functions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("For a function"),s("OutboundLink")],1),t._v(", use "),s("code",[t._v("jest.fn()")]),t._v(".")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/manual-mocks.html#mocking-user-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("For a source file"),s("OutboundLink")],1),t._v(", add the mock to a "),s("code",[t._v("__mocks__")]),t._v(" directory adjacent to the file.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://facebook.github.io/jest/docs/en/manual-mocks.html#mocking-node-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("For a dependency in "),s("code",[t._v("node_modules")]),s("OutboundLink")],1),t._v(", add the mock to "),s("code",[t._v("tests/unit/__mocks__")]),t._v(". You can see an example of this with the "),s("code",[t._v("axios")]),t._v(" mock, which intercepts requests with relative URLs to either "),s("a",{attrs:{href:"#the-mock-api"}},[t._v("our mock API")]),t._v(" or a local/live API if the "),s("code",[t._v("API_BASE_URL")]),t._v(" environment variable is set.")])]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._m(17),t._v(" "),s("p",[t._v("Nightwatch offers many advantages over other test frameworks, including the abilities to:")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("Working against the production API can be useful sometimes, but it also has some disadvantages:")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("The mock API is an "),s("a",{attrs:{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Express"),s("OutboundLink")],1),t._v(" server in "),s("code",[t._v("tests/mock-api")]),t._v(" you can extend to - you guessed it - mock what the real API would do, solving all the problems listed above. This solution is also backend-agnostic, making it ideal for a wide variety of projects.")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),s("p",[t._v("Or similarly, with a live server:")]),t._v(" "),t._m(26)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"tests-and-mocking-the-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tests-and-mocking-the-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Tests and Mocking the API")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"#tests-and-mocking-the-api"}},[t._v("Tests and Mocking the API")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#running-all-tests"}},[t._v("Running all Tests")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#unit-tests-with-jest"}},[t._v("Unit Tests with Jest")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#running-unit-tests"}},[t._v("Running Unit Tests")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#introduction-to-jest"}},[t._v("Introduction to Jest")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#unit-test-files"}},[t._v("Unit Test Files")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#unit-test-helpers"}},[t._v("Unit Test Helpers")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#unit-test-mocks"}},[t._v("Unit Test Mocks")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#end-to-end-tests-with-nightwatch"}},[t._v("End-to-End Tests with Nightwatch")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#running-end-to-end-tests"}},[t._v("Running end-to-end Tests")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#introduction-to-nightwatch"}},[t._v("Introduction to Nightwatch")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#accessibility-driven-end-to-end-tests"}},[t._v("Accessibility-driven end-to-end Tests")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#the-mock-api"}},[t._v("The Mock API")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#testingdeveloping-against-a-real-server"}},[t._v("Testing/Developing against a real Server")])])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"running-all-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#running-all-tests","aria-hidden":"true"}},[this._v("#")]),this._v(" Running all Tests")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[this._v("# Run all tests")]),this._v("\nyarn "),e("span",{attrs:{class:"token function"}},[this._v("test")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"unit-tests-with-jest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unit-tests-with-jest","aria-hidden":"true"}},[this._v("#")]),this._v(" Unit Tests with Jest")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"running-unit-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#running-unit-tests","aria-hidden":"true"}},[this._v("#")]),this._v(" Running Unit Tests")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[this._v("# Run unit tests")]),this._v("\nyarn unit\n\n"),e("span",{attrs:{class:"token comment"}},[this._v("# Run unit tests in watch mode")]),this._v("\nyarn unit:watch\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"introduction-to-jest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-jest","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction to Jest")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For unit tests, we use Jest with the "),e("code",[this._v("describe")]),this._v("/"),e("code",[this._v("expect")]),this._v(" syntax. If you're not familiar with Jest, I recommend first browsing through the existing tests to get a sense for them.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"unit-test-files"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unit-test-files","aria-hidden":"true"}},[this._v("#")]),this._v(" Unit Test Files")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Configuration for Jest is in "),e("code",[this._v("jest.config.js")]),this._v(", support files are in "),e("code",[this._v("tests/unit")]),this._v(", but as for the tests themselves - they're first-class citizens. That means they live alongside our source files, using the same name as the file they test, but with the extension "),e("code",[this._v(".unit.js")]),this._v(". This may seem strange at first, but it makes poor test coverage obvious from a glance, even for those less familiar with the project. It also lowers the barrier to adding tests before creating a new file, adding a new feature, or fixing a bug.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"unit-test-helpers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unit-test-helpers","aria-hidden":"true"}},[this._v("#")]),this._v(" Unit Test Helpers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("See "),e("a",{attrs:{href:"../tests/unit/setup.js"}},[e("code",[this._v("tests/unit/setup.js")])]),this._v(" for a list of helpers, including documentation in comments.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"unit-test-mocks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unit-test-mocks","aria-hidden":"true"}},[this._v("#")]),this._v(" Unit Test Mocks")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"end-to-end-tests-with-nightwatch-available-in-beta-release"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#end-to-end-tests-with-nightwatch-available-in-beta-release","aria-hidden":"true"}},[this._v("#")]),this._v(" End-to-End Tests with Nightwatch (available in beta release!)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"running-end-to-end-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#running-end-to-end-tests","aria-hidden":"true"}},[this._v("#")]),this._v(" Running end-to-end Tests")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[this._v("# Run end to end tests")]),this._v("\nyarn e2e\n\n"),e("span",{attrs:{class:"token comment"}},[this._v("# Run the dev server with the nightwatch client")]),this._v("\nyarn dev:e2e\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"introduction-to-nightwatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-nightwatch","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction to Nightwatch")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"#core-concepts"}},[this._v("Core Concepts")])]),this._v(" "),e("li",[e("a",{attrs:{href:"#best-practice"}},[this._v("Best Practices")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("# "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("available "),s("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" beta release"),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"accessibility-driven-end-to-end-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accessibility-driven-end-to-end-tests","aria-hidden":"true"}},[this._v("#")]),this._v(" Accessibility-driven end-to-end Tests")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"the-mock-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-mock-api","aria-hidden":"true"}},[this._v("#")]),this._v(" The Mock API")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Networks requests are slow, which slows down both development and testing.")]),this._v(" "),e("li",[this._v("Development and testing become dependent on a stable network connection.")]),this._v(" "),e("li",[this._v("Hitting the production API often means modifying the production database, which you typically don't want to do during automated tests.")]),this._v(" "),e("li",[this._v("To work on a frontend feature, the backend for it must already be complete.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"testing-developing-against-a-real-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#testing-developing-against-a-real-server","aria-hidden":"true"}},[this._v("#")]),this._v(" Testing/Developing against a real Server")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In some situations, you might prefer to test against a local server while developing, or maybe just during continuous integration. To do so, you can run any development or test command with the "),e("code",[this._v("API_BASE_URL")]),this._v(" environment variable. For example:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("API_BASE_URL"),e("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v("http://localhost:3000 yarn "),e("span",{attrs:{class:"token function"}},[this._v("test")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("API_BASE_URL"),e("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v("https://staging.example.io yarn "),e("span",{attrs:{class:"token function"}},[this._v("test")]),this._v("\n")])])])}],!1,null,null,null);n.options.__file="tests.md";e.default=n.exports}}]);